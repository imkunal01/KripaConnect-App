# Frontend-Backend Integration - Phased Implementation

## üéØ Implementation Strategy
Each phase is **completely independent** and must be **fully functional** before moving to the next. No dummy data, no placeholder functionality.

---

# PHASE 1: Authentication & User Session Management

## Objective
Build complete authentication system with session persistence

## Tasks

### 1.1 Login/Signup Pages
- Connect login form with backend `/auth/login` endpoint
- Connect signup form with backend `/auth/register` endpoint
- **Frontend Validations**:
  - Email: Valid format (regex validation)
  - Password: Min 8 characters, 1 uppercase, 1 number, 1 special char
  - Confirm password match
  - Display validation errors inline

### 1.2 Session Management
- Implement JWT token storage (localStorage/httpOnly cookies)
- Add token to all API request headers
- Auto-login on page refresh if valid token exists
- Token expiry handling with refresh token logic
- Redirect unauthenticated users to login

### 1.3 Logout Functionality
- Clear all session data (tokens, user data)
- Redirect to login page
- Show confirmation message

### 1.4 Backend Requirements
- Verify endpoints: `/auth/login`, `/auth/register`, `/auth/logout`, `/auth/refresh`
- Return user role (customer/retailer/admin) in response
- Profile photo field in User schema

### ‚úÖ Acceptance Criteria
- [ ] User can register with validation
- [ ] User can login successfully
- [ ] Session persists after page refresh
- [ ] Logout clears all data
- [ ] Invalid credentials show error messages
- [ ] Role-based data returned from backend

---

# PHASE 2: Navigation & Basic Product Display

## Objective
Make navigation functional and display real products on homepage

## Tasks

### 2.1 Navigation Bar
- **Home Link**: Redirect to `/`
- **Categories Button**: Redirect to `/categories`
- **B2B Link**: Redirect to `/retailer-portal` (show only if user role = "retailer")
- **Favorites Icon**: Redirect to `/favorites` (show count badge)
- **Cart Icon**: Redirect to `/cart` (show item count badge)
- **Profile Icon**: Redirect to `/profile`

### 2.2 Hamburger Menu
- **Home**: Navigate to `/`
- **Product Listing**: Navigate to `/products`
- Mobile responsive toggle

### 2.3 Homepage - Hero Section
- **Search Bar**: 
  - Input field working
  - On submit: Navigate to `/products?search={query}`
  - Show search icon and clear button
- **CTA Buttons**: Link to respective pages

### 2.4 Homepage - Categories Section
- Fetch categories from backend `/categories` endpoint
- Display category cards with images
- Click on category ‚Üí Navigate to `/products?category={categoryId}`

### 2.5 Homepage - Trending Products
- Fetch products from backend `/products/trending` endpoint
- Display 8-12 products in grid
- Show: Image, Name, Price, "Add to Cart" button
- Quick "Add to Favorites" icon on card

### 2.6 Footer
- Make all links functional (About, Contact, Terms, Privacy)
- Social media links

### 2.7 Backend Requirements
- Endpoints needed:
  - `GET /categories` - Return all categories
  - `GET /products/trending` - Return trending products
  - Product schema: name, image (Cloudinary URL), price, bulkPrice, stock, category

### ‚úÖ Acceptance Criteria
- [ ] All navigation links work
- [ ] Search bar redirects with query
- [ ] Real categories displayed from backend
- [ ] Real trending products shown
- [ ] Role-based visibility (B2B link for retailers only)
- [ ] Cart and favorites show item count

---

# PHASE 3: Product Listing & Filtering System

## Objective
Complete product browsing with search, filters, and sorting

## Tasks

### 3.1 Product Listing Page (`/products`)
- Fetch all products from `GET /products` endpoint
- Support query parameters: `?search=`, `?category=`, `?minPrice=`, `?maxPrice=`, `?brand=`, `?inStock=`, `?sort=`

### 3.2 Left Sidebar Filters
- **Category Filter**:
  - Fetch from `/categories`
  - Checkboxes for multiple selection
  - Apply filter on change
  
- **Price Range Filter**:
  - Min and Max input fields
  - Apply button
  - Show current range

- **Brand Filter**:
  - Fetch unique brands from products
  - Checkboxes for multiple brands
  
- **Availability Filter**:
  - Radio buttons: All, In Stock, Out of Stock
  
- **Clear All Filters** button

### 3.3 Top Bar Controls
- **Search Bar**: Full-text product search
- **Sort Dropdown**:
  - Price: Low to High
  - Price: High to Low
  - Newest First
  - Name: A-Z
  - Name: Z-A
- **Results Count**: "Showing X products"

### 3.4 Product Grid
- Responsive grid (3-4 columns desktop, 2 mobile)
- Product Card shows:
  - Image
  - Name
  - Price
  - Stock status badge
  - "Add to Cart" button
  - Favorites heart icon (toggleable)
- Click on card ‚Üí Navigate to `/product/{productId}`

### 3.5 Loading & Empty States
- Show skeleton loaders while fetching
- "No products found" message with illustration
- Error handling with retry button

### 3.6 Backend Requirements
- `GET /products` with query params support
- `GET /products?search={query}&category={id}&minPrice={min}&maxPrice={max}&brand={brand}&inStock={bool}&sort={field}`
- Return: products array, total count, filters metadata

### ‚úÖ Acceptance Criteria
- [ ] All filters work independently and together
- [ ] Search returns relevant results
- [ ] Sorting changes product order
- [ ] URL updates with filter parameters
- [ ] Filters persist on page refresh
- [ ] Real-time stock status displayed
- [ ] Responsive on all devices

---

# PHASE 4: Product Details & Favorites System

## Objective
Individual product page and complete favorites functionality

## Tasks

### 4.1 Product Detail Page (`/product/:id`)
- Fetch from `GET /products/:id`
- Display:
  - Product image (large, zoomable if possible)
  - Product name
  - Price (regular price)
  - Stock availability
  - Quantity selector (+ and - buttons, min: 1, max: stock)
  - **Add to Cart** button (primary CTA)
  - **Add to Favorites** heart icon (toggleable)
  - Brief description (if in schema)
- **Add to Cart**: 
  - Add to cart in backend
  - Show success notification
  - Update cart count in navbar
- **Add to Favorites**:
  - Toggle on/off
  - Update backend immediately
  - Visual feedback

### 4.2 Favorites System Backend Integration
- `POST /favorites/add` - Add product to favorites
- `DELETE /favorites/remove/:productId` - Remove from favorites
- `GET /favorites` - Get all user favorites

### 4.3 Favorites Page (`/favorites`)
- Display all favorited products in grid
- Each product card shows:
  - Image, Name, Price
  - "Add to Cart" button
  - Remove from favorites button
- Empty state: "No favorites yet" with CTA to browse products
- Remove item: 
  - Instant UI update
  - Backend deletion
  - Success notification

### 4.4 Backend Requirements
- `GET /products/:id` - Single product details
- `POST /favorites/add` - Body: `{productId}`
- `DELETE /favorites/remove/:productId`
- `GET /favorites` - Return user's favorite products array
- User schema includes: `favorites: [ObjectId]` (array of product IDs)

### ‚úÖ Acceptance Criteria
- [ ] Product detail page shows all information
- [ ] Quantity selector works (respects stock limits)
- [ ] Add to cart from detail page works
- [ ] Favorites toggle persists in backend
- [ ] Favorites page shows all saved items
- [ ] Remove from favorites works instantly
- [ ] Empty states handled properly
- [ ] All actions show notifications

---

# PHASE 5: Shopping Cart & Checkout Flow

## Objective
Complete cart management and order placement with payment

## Tasks

### 5.1 Cart Functionality
- `GET /cart` - Fetch user's cart
- `POST /cart/add` - Add item (productId, quantity)
- `PUT /cart/update/:itemId` - Update quantity
- `DELETE /cart/remove/:itemId` - Remove item

### 5.2 Shopping Cart Page (`/cart`)
- Display all cart items:
  - Product image
  - Product name
  - Price per unit
  - Quantity selector (update on change)
  - Remove button
  - Subtotal per item
- **Order Summary** (right sidebar or bottom):
  - Subtotal
  - Discount (if applicable)
  - Total Amount
  - **Checkout Button** (primary CTA)
- Empty cart state: "Cart is empty" with CTA to shop
- Real-time updates on quantity change
- Remove item with confirmation

### 5.3 Checkout Page (`/checkout`)
- **Step 1: Delivery Address**
  - Form fields: Name, Phone, Address, City, State, Pincode
  - "Edit" button if address exists
  - Validation on all fields
  
- **Step 2: Order Summary**
  - Review items (read-only)
  - Total amount display
  
- **Step 3: Payment Method**
  - Radio buttons: **UPI** or **COD** only
  - No credit/debit card option
  
- **Back button**: Return to previous step or cart
- **Place Order button**: Proceed to payment

### 5.4 Payment Integration (Razorpay)
- For **UPI**: 
  - Initialize Razorpay
  - Open Razorpay modal
  - Handle success/failure callbacks
  
- For **COD**:
  - Direct order placement
  - Skip payment gateway

### 5.5 Order Confirmation
- On successful payment/COD:
  - Show Flipkart-style animation (checkmark animation)
  - Display: "Order Placed Successfully!"
  - Show order ID and estimated delivery
  - Clear cart in backend and frontend
  - Redirect to orders page after 3 seconds

### 5.6 Backend Requirements
- Cart endpoints: GET, POST, PUT, DELETE
- `POST /orders/create` - Body: {items, address, paymentMethod, totalAmount}
- Razorpay integration: Create order, verify payment
- Update product stock after order
- Order schema: userId, items, address, status, paymentMethod, totalAmount, createdAt

### ‚úÖ Acceptance Criteria
- [ ] Cart shows all added items with real data
- [ ] Quantity updates work (backend + frontend)
- [ ] Remove from cart works
- [ ] Checkout flow is step-by-step
- [ ] Address validation works
- [ ] UPI payment opens Razorpay
- [ ] COD places order directly
- [ ] Order confirmation animation shows
- [ ] Cart clears after successful order
- [ ] Stock updates in backend after order
- [ ] Order saved in database

---

# PHASE 6: User Profile & Order History

## Objective
Complete user dashboard with profile management and order tracking

## Tasks

### 6.1 Profile Page (`/profile`) Layout
Three main sections:
1. Order History
2. Profile Settings
3. Favorites (already built in Phase 4, just link here)

### 6.2 Order History Section
- Fetch from `GET /orders/user/:userId`
- Display all past orders:
  - Order ID
  - Order date
  - Total amount
  - Order status (badge with color coding):
    - Order Placed (blue)
    - Processing (orange)
    - Shipped (purple)
    - Out for Delivery (yellow)
    - Delivered (green)
  - "View Details" button
- **Order Details Modal/Page**:
  - List of items with images, names, quantities
  - Delivery address
  - Payment method
  - Order timeline (status updates)
- Empty state: "No orders yet"
- Sort by: Newest first

### 6.3 Profile Settings Section
- Display current user info:
  - Profile photo (if exists, else default avatar)
  - Name
  - Email (read-only)
  - Phone number
  - Role badge (Customer/Retailer)

- **Edit Profile**:
  - Click "Edit" button ‚Üí Enable editing
  - Update name, phone
  - Upload profile photo:
    - Use Cloudinary for upload
    - Preview before saving
    - Max size: 5MB
    - Allowed: JPG, PNG
  - **Save Changes** button
  - `PUT /users/profile` endpoint

### 6.4 Profile Photo Upload
- Click on avatar ‚Üí Open file picker
- Show preview immediately
- Upload to Cloudinary on save
- Update user schema with photo URL
- Handle upload errors

### 6.5 Logout Button
- Prominent "Logout" button in profile
- On click:
  - Clear localStorage/cookies
  - Call `POST /auth/logout`
  - Redirect to login
  - Show "Logged out successfully" message

### 6.6 Backend Requirements
- `GET /orders/user/:userId` - User's orders
- `GET /orders/:orderId` - Single order details
- `PUT /users/profile` - Update profile (name, phone, profilePhoto)
- User schema includes: `profilePhoto: String` (Cloudinary URL)
- `POST /auth/logout` - Clear session

### ‚úÖ Acceptance Criteria
- [ ] Order history shows all orders correctly
- [ ] Order status displays with correct colors
- [ ] Order details page shows complete info
- [ ] Profile displays current user data
- [ ] Edit profile works (name, phone)
- [ ] Profile photo uploads to Cloudinary
- [ ] Photo preview works before saving
- [ ] Changes save to backend
- [ ] Logout clears session and redirects
- [ ] All sections are fully functional
- [ ] No dummy data anywhere

---

# PHASE 7: Retailer Portal (B2B Section)

## Objective
Build complete wholesale/bulk buying interface for retailers

## Tasks

### 7.1 Access Control
- Check user role on component mount
- If `role !== "retailer"`:
  - Redirect to homepage
  - Show error: "Access denied. Retailer account required."
- Hide B2B link in navbar for non-retailers

### 7.2 Retailer Portal Page (`/retailer-portal`)
- Similar layout to product listing
- Show ALL products but with bulk pricing

### 7.3 Product Display for Retailers
- Product card shows:
  - Product image
  - Product name
  - **Regular Price** (strikethrough)
  - **Bulk Price** (highlighted, larger font)
  - Minimum order quantity for bulk (if in schema)
  - Stock availability
  - "Add to Cart" button (uses bulk price)
  - Favorites icon

### 7.4 Filters & Search (Same as Customer)
- Category filter
- Price range (for bulk prices)
- Brand filter
- Search bar
- Sort options

### 7.5 Cart for Retailers
- Separate cart or flag in cart items: `isRetailerOrder: true`
- Calculate totals using bulk prices
- Same checkout flow as customers
- Order marked as "Bulk Order" in backend

### 7.6 Backend Requirements
- Product schema includes: `bulkPrice: Number`, `minBulkQuantity: Number`
- `GET /products?retailer=true` - Returns products with bulk pricing emphasis
- Cart/Order endpoints handle retailer pricing
- Order schema includes: `isBulkOrder: Boolean`

### ‚úÖ Acceptance Criteria
- [ ] Only retailers can access the portal
- [ ] Non-retailers redirected properly
- [ ] All products show bulk pricing
- [ ] Regular price shown for comparison
- [ ] Filters and search work
- [ ] Add to cart uses bulk price
- [ ] Checkout flow works
- [ ] Orders marked as bulk orders
- [ ] Responsive design maintained

---

# PHASE 8: Admin Dashboard - Overview & Analytics

## Objective
Build admin dashboard with key metrics and charts

## Tasks

### 8.1 Access Control
- Check user role: `role === "admin"`
- Non-admins: Redirect to homepage
- Admin route: `/admin/dashboard`

### 8.2 Dashboard Overview Cards
Four main metric cards:

**1. Total Revenue**
- Fetch from `GET /admin/stats/revenue`
- Display: `‚Çπ{amount}` with growth indicator
- Calculate: Sum of all completed orders

**2. Total Users**
- Fetch from `GET /admin/stats/users`
- Display separately:
  - Customers: X
  - Retailers: Y
  - Total: X + Y
- Show growth percentage

**3. Total Orders**
- Fetch from `GET /admin/stats/orders`
- Count all orders
- Show: Pending, Completed, Cancelled counts

**4. Products**
- Total products count
- Low stock items (< 10 items)
- Out of stock items

### 8.3 Revenue Chart (Line Chart)
- X-axis: Months (last 12 months)
- Y-axis: Revenue amount
- Fetch from `GET /admin/stats/revenue-monthly`
- Backend returns: `[{month: "Jan", revenue: 50000}, ...]`
- Use Chart.js or Recharts
- Show data points and tooltips

### 8.4 Stock Distribution (Pie Chart)
- Segments:
  - In Stock (>50 items): Green
  - Low Stock (10-50 items): Yellow
  - Out of Stock (0 items): Red
- Fetch from `GET /admin/stats/stock-distribution`
- Show percentages and counts

### 8.5 Backend Requirements
- `GET /admin/stats/revenue` - Total revenue, growth %
- `GET /admin/stats/users` - User counts by role
- `GET /admin/stats/orders` - Order counts by status
- `GET /admin/stats/products` - Product inventory stats
- `GET /admin/stats/revenue-monthly` - Monthly revenue data
- `GET /admin/stats/stock-distribution` - Stock levels
- Middleware: `isAdmin` for route protection

### ‚úÖ Acceptance Criteria
- [ ] Only admins can access dashboard
- [ ] All metric cards show real data
- [ ] Revenue chart displays correctly
- [ ] Stock pie chart shows distribution
- [ ] Data updates on page refresh
- [ ] Charts are responsive
- [ ] Loading states implemented
- [ ] Error handling for failed API calls

---

# PHASE 9: Admin - Product & Category Management

## Objective
Complete CRUD operations for products and categories with image upload

## Tasks

### 9.1 Product Management Section
- Navigate to: `/admin/products`
- **Product List Table**:
  - Columns: Image, Name, Price, Bulk Price, Stock, Category, Actions
  - Pagination (20 items per page)
  - Search bar (by name or SKU)
  - Filter by category dropdown

### 9.2 Add Product
- Click "Add Product" button ‚Üí Open modal/form
- **Form Fields**:
  - Product Name (required)
  - Description (textarea)
  - Regular Price (number, required)
  - Bulk Price (number, required)
  - Stock Quantity (number, required)
  - Category (dropdown, required)
  - Brand (text)
  - Image Upload (required)
- **Image Upload**:
  - Click to select image
  - Preview before upload
  - Upload to Cloudinary
  - Get URL and store in product
  - Max size: 5MB
  - Formats: JPG, PNG, WebP
- **Submit**: `POST /admin/products/create`
- Show success notification
- Refresh product list

### 9.3 Edit Product
- Click "Edit" icon ‚Üí Open form with existing data
- Allow changing all fields including image
- Re-upload image if changed
- **Submit**: `PUT /admin/products/:id`
- Update backend
- Refresh list

### 9.4 Delete Product
- Click "Delete" icon ‚Üí Confirmation modal
- "Are you sure? This action cannot be undone."
- **Confirm**: `DELETE /admin/products/:id`
- Remove from database
- Refresh list

### 9.5 Category Management Section
- Navigate to: `/admin/categories`
- **Category List**:
  - Display as cards or table
  - Show: Category name, image, product count
  - Actions: Edit, Delete

### 9.6 Add Category
- Click "Add Category" ‚Üí Modal
- **Fields**:
  - Category Name (required, unique)
  - Category Image (Cloudinary upload)
- **Submit**: `POST /admin/categories/create`
- Success notification

### 9.7 Edit Category
- Click "Edit" ‚Üí Pre-fill form
- Update name or image
- **Submit**: `PUT /admin/categories/:id`

### 9.8 Delete Category
- Click "Delete" ‚Üí Confirmation
- Check if category has products: "X products in this category. Move them first."
- If empty: `DELETE /admin/categories/:id`
- **Auto-update**: Changes reflect on customer and retailer pages immediately

### 9.9 Cloudinary Integration
- Backend setup:
  - Cloudinary SDK configured
  - Upload endpoint: `POST /upload/image`
  - Returns: `{url: "cloudinary_url", publicId: "..."}`
- Frontend:
  - Convert image to base64 or FormData
  - Send to upload endpoint
  - Receive URL and save to product/category

### 9.10 Backend Requirements
- Product CRUD endpoints:
  - `POST /admin/products/create`
  - `GET /admin/products` (with pagination, search)
  - `PUT /admin/products/:id`
  - `DELETE /admin/products/:id`
- Category CRUD endpoints:
  - `POST /admin/categories/create`
  - `GET /admin/categories`
  - `PUT /admin/categories/:id`
  - `DELETE /admin/categories/:id`
- `POST /upload/image` - Cloudinary upload
- Product schema: All fields including `image: String` (Cloudinary URL)

### ‚úÖ Acceptance Criteria
- [ ] Product list displays with all data
- [ ] Add product works with image upload
- [ ] Edit product updates backend
- [ ] Delete product removes from DB
- [ ] Images upload to Cloudinary successfully
- [ ] Image URLs stored in database
- [ ] Category CRUD operations work
- [ ] Category deletion checks for products
- [ ] Changes reflect on frontend immediately
- [ ] All forms have validation
- [ ] Success/error notifications show
- [ ] No dummy data or placeholders

---

# PHASE 10: Admin - Order & User Management

## Objective
Order tracking system and user management with CRUD operations

## Tasks

### 10.1 Order Management Section
- Navigate to: `/admin/orders`
- **Orders Table**:
  - Columns: Order ID, Customer Name, Date, Amount, Status, Actions
  - Sort by: Date (newest first), Amount, Status
  - Filter by status dropdown
  - Search by order ID or customer name
  - Pagination

### 10.2 View Order Details
- Click on order row ‚Üí Open details modal/page
- Display:
  - Order ID
  - Customer details (name, email, phone)
  - Order date
  - Items list (name, quantity, price)
  - Delivery address
  - Payment method
  - Current status
  - Total amount
  - Order timeline (status history)

### 10.3 Update Order Status
- Dropdown in order details:
  - Order Placed
  - Processing
  - Shipped
  - Out for Delivery
  - Delivered
  - Cancelled
- On status change:
  - `PUT /admin/orders/:id/status` - Body: `{status: "new_status"}`
  - Add timestamp to order timeline
  - Send notification to user (optional: email/SMS)
  - Update order in real-time

### 10.4 User Management Section
- Navigate to: `/admin/users`
- **Users Table**:
  - Columns: Profile Photo, Name, Email, Role, Join Date, Actions
  - Filter by role: All, Customers, Retailers
  - Search by name or email
  - Pagination

### 10.5 View User Details
- Click user row ‚Üí Details page
- Display:
  - Profile photo
  - Name
  - Email
  - Phone
  - Role
  - Join date
  - Total orders
  - Total spent
  - Order history (link to orders)

### 10.6 Create User (Admin)
- Click "Add User" ‚Üí Form
- **Fields**:
  - Name
  - Email (unique validation)
  - Password
  - Phone
  - Role (dropdown: Customer, Retailer)
- **Submit**: `POST /admin/users/create`
- Send welcome email (optional)

### 10.7 Edit User
- Click "Edit" ‚Üí Form with existing data
- Allow changing:
  - Name
  - Phone
  - Role
- Cannot change: Email (or require verification)
- **Submit**: `PUT /admin/users/:id`

### 10.8 Delete User
- Click "Delete" ‚Üí Confirmation
- Warning: "This will delete all user data including orders and favorites."
- **Confirm**: `DELETE /admin/users/:id`
- Cascade delete: Remove user's orders, cart, favorites

### 10.9 Backend Requirements
- Order management endpoints:
  - `GET /admin/orders` (all orders with filters)
  - `GET /admin/orders/:id` (single order)
  - `PUT /admin/orders/:id/status` (update status)
- User management endpoints:
  - `GET /admin/users` (all users with filters)
  - `GET /admin/users/:id` (single user)
  - `POST /admin/users/create`
  - `PUT /admin/users/:id`
  - `DELETE /admin/users/:id`
- Order schema includes: `statusHistory: [{status, timestamp}]`

### ‚úÖ Acceptance Criteria
- [ ] All orders display correctly
- [ ] Order details show complete info
- [ ] Status update works and saves
- [ ] Status timeline displays correctly
- [ ] User list shows all users with filters
- [ ] User details page shows complete info
- [ ] Create user works with validation
- [ ] Edit user updates backend
- [ ] Delete user removes all related data
- [ ] Confirmations on delete operations
- [ ] All CRUD operations functional
- [ ] Real-time updates after actions

---

# PHASE 11: Admin - Inventory & Stock Management

## Objective
Advanced inventory management with stock alerts and bulk operations

## Tasks

### 11.1 Inventory Dashboard
- Navigate to: `/admin/inventory`
- **Summary Cards**:
  - Total Products
  - Low Stock Items (<10)
  - Out of Stock Items (0)
  - Total Inventory Value (sum of price √ó stock)

### 11.2 Inventory Table
- **Columns**:
  - Image
  - Product Name
  - SKU/ID
  - Regular Price
  - Bulk Price
  - Current Stock
  - Status Badge (In Stock/Low Stock/Out of Stock)
  - Actions
- **Color coding**:
  - Green: Stock > 50
  - Yellow: Stock 10-50 (Low Stock)
  - Red: Stock < 10 or 0 (Out of Stock)

### 11.3 Filters & Search
- Search by name or SKU
- Filter by:
  - Stock status (All, In Stock, Low Stock, Out of Stock)
  - Category
- Sort by:
  - Stock (Low to High, High to Low)
  - Price

### 11.4 Update Stock
- Click "Update Stock" button on row ‚Üí Modal
- Show current stock: 50
- **Options**:
  - Add stock: +X (increase)
  - Reduce stock: -X (decrease)
  - Set to specific number: X
- Input quantity
- Reason dropdown (Restock, Sale, Damaged, Returned)
- **Submit**: `PUT /admin/inventory/:id/stock`
- Log transaction in stock history

### 11.5 Update Pricing
- Click "Edit Price" ‚Üí Modal
- Show current prices
- Update:
  - Regular Price
  - Bulk Price
- Validation: Bulk price < Regular price
- **Submit**: `PUT /admin/products/:id/pricing`

### 11.6 Mark as Out of Stock / In Stock
- Toggle button on each row
- Manually mark product as unavailable (even if stock > 0)
- Use case: Quality issues, seasonal items
- **Submit**: `PUT /admin/products/:id/availability`
- Backend field: `isAvailable: Boolean`

### 11.7 Stock History Log
- Click "History" on product ‚Üí Show modal
- Display table:
  - Date/Time
  - Action (Added, Reduced, Restocked)
  - Quantity changed
  - Previous stock
  - New stock
  - Reason
  - Admin who made change
- Helps with audit trail

### 11.8 Low Stock Alerts
- Dashboard notification: "5 products low on stock"
- Click ‚Üí Filtered view of low stock items
- Option to send email alert to admin (optional)

### 11.9 Bulk Operations
- Select multiple products (checkboxes)
- Bulk actions dropdown:
  - Update Category
  - Mark as Out of Stock
  - Delete Selected
- Confirmation before bulk action
- Progress indicator for bulk operations

### 11.10 Backend Requirements
- Inventory endpoints:
  - `GET /admin/inventory` (all products with stock data)
  - `PUT /admin/inventory/:id/stock` - Body: `{action: 'add/reduce/set', quantity, reason}`
  - `PUT /admin/products/:id/pricing` - Body: `{price, bulkPrice}`
  - `PUT /admin/products/:id/availability` - Body: `{isAvailable}`
  - `GET /admin/inventory/:id/history` - Stock change log
- Product schema additions:
  - `stockHistory: [{action, quantity, prevStock, newStock, reason, date, adminId}]`
  - `isAvailable: Boolean`
- Stock validation: Cannot go negative

### ‚úÖ Acceptance Criteria
- [ ] Inventory table shows all products
- [ ] Stock levels color-coded correctly
- [ ] Update stock works (add/reduce/set)
- [ ] Stock history logs all changes
- [ ] Update pricing works with validation
- [ ] Mark out of stock toggle works
- [ ] Low stock alerts display
- [ ] Bulk operations work for multiple items
- [ ] All updates save to backend
- [ ] Inventory value calculated correctly
- [ ] Real-time updates after changes
- [ ] No negative stock allowed

---

# PHASE 12: Admin - Payment Management & Logout

## Objective
Payment tracking system and secure admin logout

## Tasks

### 12.1 Payment Management Section
- Navigate to: `/admin/payments`
- **Overview Cards**:
  - Total Payments Received
  - Pending Payments (COD not yet collected)
  - Payment Success Rate
  - Today's Revenue

### 12.2 Payments Table
- **Columns**:
  - Transaction ID
  - Order ID (clickable link)
  - Customer Name
  - Payment Method (UPI/COD)
  - Amount
  - Status (Success, Pending, Failed, Refunded)
  - Date
  - Actions
- Filter by:
  - Payment method
  - Status
  - Date range
- Search by transaction ID or order ID

### 12.3 Payment Details
- Click transaction ‚Üí Details modal
- Display:
  - Transaction ID
  - Order ID with link
  - Customer details
  - Payment method
  - Amount
  - Status
  - Gateway response (for UPI)
  - Payment date/time
  - Related order items

### 12.4 Refund Management (Optional Enhancement)
- "Refund" button on successful payments
- Refund modal:
  - Amount to refund (full or partial)
  - Reason (dropdown: Cancelled, Returned, Quality issue, Other)
  - Notes
- **Submit**: `POST /admin/payments/:id/refund`
- Update payment status to "Refunded"
- Update order status

### 12.5 Payment Reports
- Generate report button
- Filters:
  - Date range
  - Payment method
  - Status
- Download as CSV or PDF
- Report includes:
  - Summary totals
  - Payment list
  - Method breakdown
  - Daily/weekly/monthly trends

### 12.6 COD Tracking
- Separate view for COD orders
- Status: Pending Collection, Collected
- Mark as collected when delivered
- Update: `PUT /admin/payments/:id/collect-cod`

### 12.7 Admin Logout
- Prominent "Logout" button in admin navbar/sidebar
- Click logout ‚Üí Confirmation modal: "Are you sure you want to logout?"
- On confirm:
  - `POST /admin/auth/logout`
  - Clear all session data (tokens, admin data)
  - Clear localStorage/sessionStorage
  - Redirect to `/admin/login` or homepage
  - Show "Logged out successfully" notification
- Session timeout: Auto-logout after 30 min inactivity (optional)

### 12.8 Backend Requirements
- Payment management endpoints:
  - `GET /admin/payments` (all transactions with filters)
  - `GET /admin/payments/:id` (transaction details)
  - `POST /admin/payments/:id/refund` (process refund)
  - `PUT /admin/payments/:id/collect-cod` (mark COD collected)
  - `GET /admin/payments/report` (generate report)
- Payment schema:
  - transactionId, orderId, userId, amount, method, status, date, gatewayResponse
- Refund tracking in order schema
- `POST /admin/auth/logout` endpoint

### ‚úÖ Acceptance Criteria
- [ ] Payments table shows all transactions
- [ ] Payment details display correctly
- [ ] Filter and search work
- [ ] COD tracking functional
- [ ] Refund process works (if implemented)
- [ ] Payment reports generate correctly
- [ ] Admin logout clears all session data
- [ ] Logout redirects to login page
- [ ] Cannot access admin routes after logout
- [ ] All payment data accurate
- [ ] Real-time updates after actions

---

# üìã IMPLEMENTATION CHECKLIST

## How to Use These Phases

### For Each Phase:
1. ‚úÖ Read the entire phase carefully
2. ‚úÖ Understand all requirements before starting
3. ‚úÖ Implement all tasks in the phase
4. ‚úÖ Test thoroughly - every feature must work
5. ‚úÖ Verify acceptance criteria
6. ‚úÖ Only then move to next phase

### Critical Rules:
- ‚ö†Ô∏è **NEVER skip any task within a phase**
- ‚ö†Ô∏è **NO dummy data** - only real backend data
- ‚ö†Ô∏è **NO placeholder functionality** - everything must work
- ‚ö†Ô∏è **Test each feature** before moving forward
- ‚ö†Ô∏è **Complete one phase** before starting the next

### Communication with AI:
When giving instructions to AI, say:

**"Implement PHASE X completely. Follow all tasks in order. Ensure everything is fully functional with backend integration. No dummy data. No placeholders. Test each feature."**

After completion, verify with:

**"Verify all acceptance criteria for PHASE X are met. Show me the implementation status."**

---

# üéØ PHASE DEPENDENCIES

- **Phase 1** must be completed first (authentication required for all other phases)
- **Phase 2** before Phase 3 (navigation needed before product pages)
- **Phase 4** before Phase 5 (favorites system independent)
- **Phase 5** before Phase 6 (orders needed for order history)
- **Phase 7** independent (can be done after Phase 1)
- **Phase 8-12** are admin phases (require Phase 1 with admin role)

---

# üîß BACKEND SCHEMA QUICK REFERENCE

### User Schema:
```javascript
{
  name, email, password, phone, role, 
  profilePhoto, favorites: [productId], 
  cart: [items], createdAt
}
```

### Product Schema:
```javascript
{
  name, description, image, price, bulkPrice, 
  stock, category, brand, isAvailable, 
  stockHistory: [], createdAt
}
```

### Order Schema:
```javascript
{
  userId, items: [], address, paymentMethod, 
  totalAmount, status, isBulkOrder, 
  statusHistory: [], paymentId, createdAt
}
```

### Category Schema:
```javascript
{
  name, image, createdAt
}
```

---

# üí° TESTING PROTOCOL FOR EACH PHASE

After completing each phase, test:

1. ‚úÖ All API calls work (check Network tab)
2. ‚úÖ Data displays correctly
3. ‚úÖ Error handling works (test with invalid data)
4. ‚úÖ Loading states show
5. ‚úÖ Success/error notifications appear
6. ‚úÖ Navigation works
7. ‚úÖ Responsive on mobile
8. ‚úÖ No console errors
9. ‚úÖ Backend updates persist
10. ‚úÖ User experience is smooth

---

# üöÄ FINAL NOTE

**This is a complete, production-ready implementation guide.**

Each phase is independent and fully functional. No phase should be considered "done" unless ALL acceptance criteria are met and thoroughly tested.

Good luck with your implementation! üéâ